let e=null;async function t(){if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js");return e=t,t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&function(){const e=document.createElement("div");e.className="\n    fixed bottom-4 right-4 bg-primary-600 text-white p-4 rounded-lg shadow-lg \n    flex items-center space-x-3 z-50 max-w-sm\n  ",e.innerHTML='\n    <div class="flex-1">\n      <p class="font-medium">New version available!</p>\n      <p class="text-sm opacity-90">Update to get the latest features.</p>\n    </div>\n    <button id="update-btn" class="bg-white text-primary-600 px-3 py-1 rounded text-sm font-medium">\n      Update\n    </button>\n    <button id="dismiss-btn" class="text-white/80 hover:text-white">\n      Ã—\n    </button>\n  ',document.body.appendChild(e);const t=e.querySelector("#update-btn");null==t||t.addEventListener("click",()=>{n(),document.body.removeChild(e)});const o=e.querySelector("#dismiss-btn");null==o||o.addEventListener("click",()=>{document.body.removeChild(e)}),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e4)}()})}),t}catch(t){return null}return null}async function n(){if(e)try{await e.update(),window.location.reload()}catch(t){}}let o=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),o=e,function(){const e=document.createElement("button");e.className="\n    fixed bottom-4 left-4 bg-secondary-600 text-white p-3 rounded-full shadow-lg\n    hover:bg-secondary-700 transition-colors z-50 flex items-center space-x-2\n  ",e.innerHTML='\n    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" \n            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4-4m0 0L8 8m4-4v12">\n      </path>\n    </svg>\n    <span class="text-sm font-medium">Install App</span>\n  ',e.addEventListener("click",async()=>{if(o){o.prompt();const{outcome:t}=await o.userChoice;o=null,document.body.removeChild(e)}}),document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},15e3)}()});export{t as registerSW,n as updateSW};
//# sourceMappingURL=pwa-HJs8x5R7.js.map
